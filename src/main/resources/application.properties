# YakRooms Application Configuration
# This file contains common settings shared across all profiles
# Profile-specific configurations are in:
# - application-development.properties (for local development)
# - application-production.properties (for production deployment)

spring.application.name=yakrooms

# Default server configuration
server.port=8080

# ================== DEFAULT PROFILE CONFIGURATION ==================
# Default profile - uses development settings when no profile is specified
# Note: Railway will override this with production profile via environment variables
spring.profiles.active=development

# Default database configuration (development) - HARDCODED
spring.datasource.url=jdbc:mysql://localhost:3306/yakrooms
spring.datasource.username=root
spring.datasource.password=ChogyalWp
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Default JPA configuration
# TEMPORARY: Using create-drop to fix refresh_tokens table column size
# Change back to 'update' after first run to preserve data
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# Default Redis configuration (optional for development) - HARDCODED
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0

# Default cache configuration - HARDCODED
spring.cache.type=redis
spring.cache.redis.time-to-live=60000
spring.cache.redis.key-prefix=yakrooms:dev:

# Default logging configuration
logging.level.com.yakrooms.be=INFO
logging.level.org.springframework.cache=INFO
logging.level.org.springframework.data.redis=INFO

# Default actuator configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# ================== REDIS CACHING CONFIGURATION ==================
# Redis Configuration (Environment Variable Support)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.database=${REDIS_DATABASE:0}
spring.data.redis.timeout=5000ms

# Redis Connection Pool Configuration
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=2000ms

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=300000
spring.cache.redis.cache-null-values=false
spring.cache.redis.use-key-prefix=true
spring.cache.redis.key-prefix=yakrooms:

# Cache-specific TTLs (in milliseconds)
app.cache.hotel-details.ttl=1800000
app.cache.hotel-listings.ttl=900000
app.cache.search-results.ttl=600000
app.cache.top-hotels.ttl=1800000

# ================== COMMON JACKSON JSON ==================
# JSON serialization settings (same for all profiles)
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.mapper.require-handlers-for-java8-times=false
spring.jackson.time-zone=UTC

# ================== COMMON BOOKING VALIDATION ==================
# Business rules (same for all profiles)
booking.max-advance-days=365
booking.min-stay-days=1
booking.max-stay-days=30

# ================== COMMON UPLOADTHING CONFIGURATION ==================
# UploadThing API settings (same for all profiles)
uploadthing.api.base-url=https://api.uploadthing.com/v5
uploadthing.api.app-id=g5h92ke5c1
uploadthing.api.timeout=30s
uploadthing.api.retry.max-attempts=3
uploadthing.api.retry.backoff-delay=1s

# ================== COMMON JWT SECURITY CONFIGURATION ==================
# JWT token settings (default for development, override in production) - SECURE
jwt.secret=${JWT_SECRET:dev-secret-key-change-this-in-production-123456789abcdefghijklmnopqrstuvwxyz}
jwt.access-token-expiration=900000
jwt.refresh-token-expiration=604800000
jwt.refresh-token.max-per-user=5
jwt.refresh-token.cleanup-batch-size=100

# ================== COMMON COOKIE SECURITY CONFIGURATION ==================
# Secure cookie settings (default for development, override in production) - SECURE
app.cookies.secure=${COOKIE_SECURE:false}
app.cookies.domain=${COOKIE_DOMAIN:}

# ================== PROFILE-SPECIFIC CONFIGURATIONS ==================
# The following configurations are profile-specific and should be defined in:
# 
# application-development.properties:
# - Database connection (localhost)
# - Redis configuration (optional)
# - Logging levels (DEBUG)
# - JPA settings (show-sql=true, ddl-auto=update)
# - Email settings (hardcoded for development)
# - Actuator endpoints (more permissive)
# - Security settings (more permissive)
# - Performance settings (development-optimized)
#
# application-production.properties:
# - Database connection (environment variables)
# - Redis configuration (required)
# - Logging levels (INFO/WARN)
# - JPA settings (show-sql=false, ddl-auto=none)
# - Email settings (environment variables)
# - Actuator endpoints (restricted)
# - Security settings (production-optimized)
# - Performance settings (production-optimized)
# - Firebase configuration (Base64 encoded credentials)
